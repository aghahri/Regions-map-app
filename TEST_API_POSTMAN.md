# Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªØ³Øª API Ø¨Ø§ Postman

## API Endpoint: Ø¯Ø±ÛŒØ§ÙØª Ù†Ø§Ù… Ù…Ø­Ù„Ù‡ Ø§Ø² Ù…Ø®ØªØµØ§Øª

### URL:
```
http://171.22.27.42/api/neighborhood
```

---

## Ø±ÙˆØ´ 1: GET (Ø³Ø§Ø¯Ù‡â€ŒØªØ±) - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ

### ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Postman:

1. **Method**: `GET` Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯

2. **URL**: 
   ```
   http://171.22.27.42/api/neighborhood?lat=35.6892&lon=51.3890
   ```

3. **Params** (Ø¯Ø± ØªØ¨ Params):
   - `lat`: `35.6892` (Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ)
   - `lon`: `51.3890` (Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ)
   - `map_id`: (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) Ø´Ù†Ø§Ø³Ù‡ Ù†Ù‚Ø´Ù‡ Ø®Ø§Øµ

4. Ø±ÙˆÛŒ **Send** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯

---

## Ø±ÙˆØ´ 2: POST (JSON Body)

### ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Postman:

1. **Method**: `POST` Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯

2. **URL**: 
   ```
   http://171.22.27.42/api/neighborhood
   ```

3. **Headers**:
   ```
   Content-Type: application/json
   ```

4. **Body** â†’ **raw** â†’ **JSON** Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:
   ```json
   {
     "lat": 35.6892,
     "lon": 51.3890
   }
   ```

5. Ø±ÙˆÛŒ **Send** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯

---

## Ø±ÙˆØ´ 3: POST (Form Data)

### ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Postman:

1. **Method**: `POST`

2. **URL**: 
   ```
   http://171.22.27.42/api/neighborhood
   ```

3. **Body** â†’ **x-www-form-urlencoded**:
   | Key | Value |
   |-----|-------|
   | `lat` | `35.6892` |
   | `lon` | `51.3890` |

4. Ø±ÙˆÛŒ **Send** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯

---

## Response Ù…ÙˆÙÙ‚ (200 OK):

```json
{
  "success": true,
  "neighborhood": "Ø¯Ø§ÙˆÙˆØ¯ÛŒÙ‡",
  "district": "3",
  "city": "ØªÙ‡Ø±Ø§Ù†",
  "map_id": "20241128_120000_123456",
  "map_name": "Ù†Ù‚Ø´Ù‡ ØªÙ‡Ø±Ø§Ù†",
  "tootapp_url": "https://tootapp.ir/join/Tehran3Da",
  "coordinates": {
    "lat": 35.6892,
    "lon": 51.3890
  }
}
```

---

## Response Ø®Ø·Ø§ - Ù…Ø­Ù„Ù‡ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ (404):

```json
{
  "success": false,
  "error": "Ù…Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø®ØªØµØ§Øª Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯",
  "coordinates": {
    "lat": 35.6892,
    "lon": 51.3890
  }
}
```

---

## Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªØµØ§Øª ØªÙ‡Ø±Ø§Ù†:

### Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ:
```
lat: 35.6997
lon: 51.3381
```

### Ù…ÛŒØ¯Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±:
```
lat: 35.7614
lon: 51.4113
```

### Ø¯Ø§ÙˆÙˆØ¯ÛŒÙ‡:
```
lat: 35.6892
lon: 51.3890
```

### Ù…ÛŒØ¯Ø§Ù† Ø§Ù†Ù‚Ù„Ø§Ø¨:
```
lat: 35.6961
lon: 51.4231
```

---

## ØªØµÙˆÛŒØ± Ø±Ø§Ù‡Ù†Ù…Ø§ Ø¯Ø± Postman (GET):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [GET â–¼] http://171.22.27.42/api/neighborhood        â”‚ [Send]
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Params â— Query Params                               â”‚
â”‚                                                      â”‚
â”‚ Key          â”‚ Value        â”‚ Description           â”‚
â”‚ lat          â”‚ 35.6892      â”‚                      â”‚
â”‚ lon          â”‚ 51.3890      â”‚                      â”‚
â”‚ map_id       â”‚ (optional)    â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ØªØµÙˆÛŒØ± Ø±Ø§Ù‡Ù†Ù…Ø§ Ø¯Ø± Postman (POST JSON):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [POST â–¼] http://171.22.27.42/api/neighborhood       â”‚ [Send]
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Headers                                              â”‚
â”‚ Content-Type: application/json                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Body â— raw â–¼ JSON                                    â”‚
â”‚                                                      â”‚
â”‚ {                                                    â”‚
â”‚   "lat": 35.6892,                                    â”‚
â”‚   "lon": 51.3890                                     â”‚
â”‚ }                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ØªØ³Øª Ø³Ø±ÛŒØ¹ Ø¨Ø§ curl:

```bash
# GET
curl "http://171.22.27.42/api/neighborhood?lat=35.6892&lon=51.3890"

# POST JSON
curl -X POST http://171.22.27.42/api/neighborhood \
  -H "Content-Type: application/json" \
  -d '{"lat": 35.6892, "lon": 51.3890}'
```

---

## Ù†Ú©Ø§Øª Ù…Ù‡Ù…:

1. âœ… **lat** = Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (latitude)
2. âœ… **lon** = Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (longitude)
3. âœ… Ø§Ú¯Ø± `map_id` Ù†Ø¯Ù‡ÛŒØ¯ØŒ Ø¯Ø± Ù‡Ù…Ù‡ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ Ø¬Ø³ØªØ¬Ùˆ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
4. âœ… Ø§Ú¯Ø± Ù…Ø­Ù„Ù‡ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ØŒ `404` Ø¨Ø§ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯

---

## Ø§Ú¯Ø± Ø®Ø·Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒØ¯:

### 404 Not Found:
- Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ú©Ù‡ API Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± deploy Ø´Ø¯Ù‡
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ `/api/neighborhood` endpoint Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª

### 500 Internal Server Error:
- Logs Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯: `sudo journalctl -u regions-map-app -n 50`

### Connection Error:
- Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø³Ø±ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Nginx Ùˆ Gunicorn Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù‡Ø³ØªÙ†Ø¯

---

## Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØ³Øª:

1. Postman Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
2. Method: `GET`
3. URL: `http://171.22.27.42/api/neighborhood?lat=35.6892&lon=51.3890`
4. Send Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯
5. Response Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯

Ø³Ø§Ø¯Ù‡! ğŸ‰

